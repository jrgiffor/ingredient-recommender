<!-- Thank your Martin Sagastume for providing live search code -->
<!-- Things to do:
  --   1) Create an "Add Ingredient" button
  --   Upon being pressed for the first time:
  --     - Create a new combination with a generated name
  --     - Add the ingredient displayed in the search to the combination
  --   For every ingredient added after that: 
  --     - Add the ingredient displayed in the search to the combination
  --   2) Create a "Recommendation" page that echoes out said combination
  --     - Allow users to rename their combination if they are logged in
  --   3) Create a "Recommend" button that takes you to the "Recommendation" page
  -->
  
{{extend 'layout.html'}}

<h1>INGRCMDR</h1>
<h2>Your place to expand your culinary résumé</h2>
<h3>{{=A('Ingredients', _href=URL('ingredients'))}}</h3>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Ajax Live Search with web2py by Martin Sagastume</title>
    <style type="text/css">
    <!--
    #ajaxresults{
        background: #ffffff;
        padding: 5px 10px;
        max-height: 400px;
        overflow: auto;
        position: absolute;
        z-index: 99;
        border: 1px solid #A9A9A9;
        border-width: 0 1px 1px 1px;
        -webkit-box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
        -moz-box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
        -box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
    }
    #ajaxresults a{
        color:#666666;
    }
    input[type=text]{
        font-size:12px;
        color:#666666;
        background-color:#ffffff;
        padding-top:5px;
        width:200px;
        height:20px;
        border:1px solid #999999;
    }
    //-->
    </style>
    <script type="text/javascript" src="{{=URL(r=request,c='static',f='jquery.js')}}"></script>
    <script type="text/javascript">
    jQuery(document).ready(function(){
        hide();
    });

    function getData(value){
        if(value != ""){
            $("#ajaxresults").show();
            $.post("{{=URL(r=request,f='ajaxlivesearch')}}",{partialstr:value},function(result){
                $("#ajaxresults").html(result);
            });
        }else{
            hide();
        }
    }

    function hide(){
        $("#ajaxresults").hide();
    }

    function copyToBox(value){
        $("#ingredients").val(value);
        hide();
    }   
    </script>
</head>
<body>
    <label for="ingredients">Search ingredients:</label><br />
    <input type="text" id="ingredients" name="ingredients" autocomplete="off" onkeyup="getData(this.value);" /><br />
    <div id="ajaxresults"></div>
</body>
